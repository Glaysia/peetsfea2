## Type1: TV wall-mounted WPT (TX below, RX above), right-edge aligned

[units]
length = "mm" # length unit

[coordinate_system]
# X: wall normal (positive into room)
# Y: right along wall (when facing TV)
# Z: up
wall_plane_x_mm = [0.0, 0.0, 0.0] # wall plane position in X: [min, max, step]
floor_plane_z_mm = [0.0, 0.0, 0.0] # floor plane position in Z: [min, max, step]

[constraints]
# Inter-core spacing (edge-to-edge) in +Z
core_core_gap_mm = [104.0, 110.0, 0.0] # TX-RX module vertical gap (edge-to-edge)
# Total RX stack (coil + core) thickness limit
rx_total_thickness_mm_max = [4.0, 4.0, 0.0] # RX total thickness limit
tx_gap_from_tv_bottom_mm = [100.0, 100.0, 0.0] # TX top is this far below TV bottom

[layout]
# Both modules are mounted on the right wall; centers aligned to Z-axis (Y=0)
right_edge_y_mm = [0.0, 0.0, 0.0] # wall right edge Y position (unused)

[tv]
present = true
# 83-inch 16:9 screen (computed)
# diagonal: 83 in = 2108.2 mm
screen_diag_in = 83.0
aspect_ratio = "16:9"
width_mm = 1837.456
height_mm = 1033.569
thickness_mm = 9.0
model = false

[tv.position]
# TV back is flush to wall plane (x = 0). Center is half thickness into room.
center_x_mm = 4.5
center_y_mm = 0.0
center_z_mm = 1200.0

[wall]
present = true
# Finite wall block for reference (non-model)
thickness_mm = 100.0
size_y_mm = 4000.0
size_z_mm = 3000.0
model = false

[wall.position]
# Wall plane at x = 0 (front face). Center is half thickness into negative X.
center_x_mm = -50.0
center_y_mm = 0.0
center_z_mm = 1500.0

[floor]
present = true
# Finite floor block for reference (non-model)
thickness_mm = 100.0
size_x_mm = 3000.0
size_y_mm = 4000.0
model = false

[floor.position]
# Floor plane at z = 0 (top face). Center is half thickness into negative Z.
center_x_mm = 1500.0
center_y_mm = 0.0
center_z_mm = -50.0

[materials.core]
mu_r = [800.0, 2000.0, 100.0] # relative permeability
epsilon_r = [10.0, 15.0, 1.0] # relative permittivity
conductivity_s_per_m = [0.001, 0.02, 0.001] # electrical conductivity


[tx.module]
present = true # whether TX core is present
outer_w_mm = [200.0, 800.0, 10.0] # TX core outer width (rectangular)
outer_h_mm = [200.0, 400.0, 10.0] # TX core outer height (rectangular)
thickness_mm = [10.0, 200.0, 1.0] # TX core thickness (X length)
offset_from_coil_mm = [0.0, 3.0, 0.5] # TX core offset from coil
model = false # non-model geometry

[tx.position]
# Center position; if align_right_edge=true, center_y is derived from right_edge_y and outer_w
center_x_mm = [0.0, 0.0, 0.0] # TX center X
center_y_mm = [0.0, 0.0, 0.0] # TX center Y
center_z_mm = [120.0, 560.0, 10.0] # TX center Z (between floor and TV bottom)

[tx.pcb]
# 2-layer PCB trace coil (rigid). All dielectrics are FR4.
# 전체 PCB는 6면을 감싸는 코일 형상을 위해 사용됨(실제 코일 정의는 [tx.coil]).
# 두께 합계는 stackup의 모든 두께 합과 일치해야 함.
layer_count = 2 # 1 or 2; if 1, inner copper is omitted
total_thickness_mm = 1.7
dielectric_material = "FR4"
dielectric_epsilon_r = 4.2

# Stackup: top -> bottom
[[tx.pcb.stackup]]
kind = "dielectric"
material = "FR4"
thickness_mm = 0.04
epsilon_r = 4.2

[[tx.pcb.stackup]]
kind = "conductor"
material = "Cu"
# plating ignored
copper_thickness_mm = 0.04

[[tx.pcb.stackup]]
kind = "dielectric"
material = "FR4"
thickness_mm = 1.54
epsilon_r = 4.2

[[tx.pcb.stackup]]
kind = "conductor"
material = "Cu"
# plating ignored
copper_thickness_mm = 0.04

[[tx.pcb.stackup]]
kind = "dielectric"
material = "FR4"
thickness_mm = 0.04
epsilon_r = 4.2

[tx.coil]
# vNext 스키마: `schema="instances_v1"` 필수.
# coil 유전자는 범위([min,max,step])로 정의하고,
# `[[tx.coil.instances]]`로 여러 코일 인스턴스(face별)를 정의한다.
schema = "instances_v1"
type = "pcb_trace"
pattern = "spiral"

# --- 제조/제약 ---
min_trace_width_mm = [0.2, 0.2, 0.0]
min_trace_gap_mm = [0.2, 0.2, 0.0]
edge_clearance_mm = [0.4, 3.0, 0.2]
fill_scale = [0.75, 1.0, 0.05]
pitch_duty = [0.35, 0.75, 0.05]

# --- 레이어 사용/겹침 최소화 ---
# 0=single_layer_top, 1=radial_split, 2=alternate_turns
layer_mode_idx = [0, 2, 1]
radial_split_top_turn_fraction = [0.5, 1.0, 0.05]
radial_split_outer_is_top = [0, 1, 1]

# --- Spiral / DD ---
max_spiral_count = 2
spiral_count = [1, 2, 1]
spiral_turns = [
  [2, 25, 1],
  [2, 25, 1],
]
spiral_direction_idx = [
  [0, 1, 1],
  [0, 1, 1],
]
spiral_start_edge_idx = [
  [0, 3, 1],
  [0, 3, 1],
]
dd_split_axis_idx = [0, 1, 1]
dd_gap_mm = [0.2, 10.0, 0.2]
dd_split_ratio = [0.5, 0.5, 0.0]

# --- 구조(기존 Type1 face stack과 연결) ---
trace_layer_count = [2, 2, 0]
# 0=yz, 1=zx, 2=xy
inner_plane_axis_idx = [0, 0, 0]
max_inner_pcb_count = 8
# 안전한 예시 범위: tx_core_thk 최소 10mm 기준으로 inner_pcb_count <= 2로 제한
inner_pcb_count = [0, 2, 1]

# symmetric half vector (len = ceil((max_inner_pcb_count + 1) / 2) = 5)
# gaps = inner_pcb_count + 1
# k = ceil(gaps/2), head = inner_spacing_ratio_half[:k]
# gaps odd : weights = head + reversed(head[:-1])
# gaps even: weights = head + reversed(head)
inner_spacing_ratio_half = [
  [0.5, 3.0, 0.5],
  [0.0, 3.0, 0.5],
  [0.0, 3.0, 0.5],
  [0.0, 3.0, 0.5],
  [0.0, 3.0, 0.5],
]

[[tx.coil.instances]]
name = "neg_x"
face = "neg_x"
present = [1, 1, 0]

[[tx.coil.instances]]
name = "pos_x"
face = "pos_x"
present = [1, 1, 0]

[[tx.coil.instances]]
name = "pos_y"
face = "pos_y"
present = [1, 1, 0]

[[tx.coil.instances]]
name = "neg_y"
face = "neg_y"
present = [1, 1, 0]

[[tx.coil.instances]]
name = "pos_z"
face = "pos_z"
present = [1, 1, 0]

[[tx.coil.instances]]
name = "neg_z"
face = "neg_z"
present = [1, 1, 0]

[rx.module]
present = true # whether RX core is present
outer_w_mm = [140.0, 1653.71, 10.0] # RX core outer width (<= 90% TV width)
outer_h_mm = [140.0, 930.21, 10.0] # RX core outer height (<= 90% TV height)
thickness_mm = [2.0, 4.0, 0.5] # RX core thickness (<= 4 mm)
offset_from_coil_mm = [0.0, 1.0, 0.1] # RX core offset from coil
model = false # non-model geometry

[rx.position]
# RX is above TX by core_core_gap_mm in +Z (edge-to-edge)
center_x_mm = [0.0, 0.0, 0.0] # RX center X
center_y_mm = [0.0, 0.0, 0.0] # RX center Y
center_z_mm = [600.0, 700.0, 20.0] # RX center Z

[rx.stack]
# Must be <= rx_total_thickness_mm_max
total_thickness_mm = [2.5, 4.0, 0.5] # RX total stack thickness
